<%- include('./partials/header') %>

<div class="h-screen container mx-auto px-4 py-8 mt-12">
    <div class="max-w-md mx-auto bg-white rounded-lg shadow-md overflow-hidden">
        <div class="bg-gradient-to-r from-blue-500 to-purple-600 p-4">
            <h2 class="text-2xl font-bold text-white text-center">Change Password</h2>
        </div>
        <form action="/users/passwordchange" method="POST" class="p-6 space-y-6" autocomplete="off">
            <div>
                <label for="current-password" class="block text-sm font-medium text-gray-700 mb-2">Current Password</label>
                <div class="relative">
                    <input type="password" id="current-password" name="currentPassword" required
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <span class="absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer" onclick="togglePasswordVisibility('current-password')">
                        <i id="current-password-icon" class="ri-eye-line text-gray-500"></i>
                    </span>
                </div>
            </div>
            <div>
                <label for="new-password" class="block text-sm font-medium text-gray-700 mb-2">New Password</label>
                <div class="relative">
                    <input type="password" id="new-password" name="newPassword" required
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <span class="absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer" onclick="togglePasswordVisibility('new-password')">
                        <i id="new-password-icon" class="ri-eye-line text-gray-500"></i>
                    </span>
                </div>
            </div>
            <div>
                <label for="confirm-password" class="block text-sm font-medium text-gray-700 mb-2">Confirm New Password</label>
                <div class="relative">
                    <input type="password" id="confirm-password" name="confirmPassword" required
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <span class="absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer" onclick="togglePasswordVisibility('confirm-password')">
                        <i id="confirm-password-icon" class="ri-eye-line text-gray-500"></i>
                    </span>
                </div>
            </div>
            <div>
                <button type="submit"
                    class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-200">
                    Change Password
                </button>
            </div>
        </form>
    </div>
</div>

<% if(error && error.length > 0) { %>
    <div id="errorMessage" class="fixed top-5 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg transition-opacity duration-300 ease-in-out">
      <span class="block"><%= error %></span>
    </div>
    <% } %>


<script>
    function togglePasswordVisibility(id) {
        const passwordField = document.getElementById(id);
        const icon = document.getElementById(`${id}-icon`);
        if (passwordField.type === "password") {
            passwordField.type = "text";
            icon.classList.remove("fa-eye");
            icon.classList.add("fa-eye-slash");
        } else {
            passwordField.type = "password";
            icon.classList.remove("fa-eye-slash");
            icon.classList.add("fa-eye");
        }
    }

    document.addEventListener('DOMContentLoaded', function() {
        var errorMessage = document.getElementById('errorMessage');
        if (errorMessage) {
          setTimeout(function() {
            errorMessage.classList.add('opacity-0');
            setTimeout(function() {
              errorMessage.style.display = 'none';
            }, 300);
          }, 5000);
        }
      });


</script>

<%- include('./partials/footer') %>